{"ast":null,"code":"import * as actionTypes from './actionTypes';\nimport { userService } from '../services';\nimport { history } from '../helpers';\nimport { toastr } from 'react-redux-toastr';\nexport const userActions = {\n  login,\n  signup,\n  getAllCities\n};\n\nfunction login(email, password) {\n  return dispatch => {\n    dispatch(request());\n    userService.login(email, password).then(user => {\n      toastr.success('Success', \"Successfully logged in\");\n      dispatch(success(user));\n      window.location.reload();\n    }, error => {\n      toastr.error('Error', error.error_message || \"Email and password not valid\");\n      dispatch(failure(error.toString()));\n    });\n  };\n\n  function request() {\n    return {\n      type: actionTypes.LOGIN_REQUEST\n    };\n  }\n\n  function success(user) {\n    return {\n      type: actionTypes.LOGIN_SUCCESS,\n      payload: {\n        user\n      }\n    };\n  }\n\n  function failure(error) {\n    return {\n      type: actionTypes.LOGIN_FAILED\n    };\n  }\n}\n\nfunction signup(name, email, password) {\n  return dispatch => {\n    dispatch(request());\n    userService.signup(name, email, password).then(user => {\n      toastr.success('Success', \"Registration Successful\");\n      dispatch(success(user));\n      history.push(`/login`);\n    }, error => {\n      toastr.error('Error', error.error_message || \"Oops Something Went Wrong !\");\n      dispatch(failure(error.toString()));\n    });\n  };\n\n  function request() {\n    return {\n      type: actionTypes.SIGNUP_REQUEST\n    };\n  }\n\n  function success(user) {\n    return {\n      type: actionTypes.SIGNUP_SUCCESS,\n      payload: {\n        user\n      }\n    };\n  }\n\n  function failure(error) {\n    return {\n      type: actionTypes.SIGNUP_FAILED\n    };\n  }\n}\n\nfunction getAllCities() {\n  return dispatch => {\n    dispatch(request());\n    userService.getCities().then(cities => {\n      dispatch(success(cities));\n    }, error => {\n      toastr.error('Error', error.error_message || \"Please check your credentials\");\n      dispatch(failure(error.toString()));\n    });\n  };\n\n  function request() {\n    return {\n      type: actionTypes.GET_CITIES_REQUEST\n    };\n  }\n\n  function success(cities) {\n    return {\n      type: actionTypes.GET_CITIES_SUCCESS,\n      payload: {\n        cities\n      }\n    };\n  }\n\n  function failure(error) {\n    return {\n      type: actionTypes.GET_CITIES_FAILED\n    };\n  }\n}","map":{"version":3,"sources":["/Users/vaibhavgurnani/Downloads/testTask/Client/src/actions/user.js"],"names":["actionTypes","userService","history","toastr","userActions","login","signup","getAllCities","email","password","dispatch","request","then","user","success","window","location","reload","error","error_message","failure","toString","type","LOGIN_REQUEST","LOGIN_SUCCESS","payload","LOGIN_FAILED","name","push","SIGNUP_REQUEST","SIGNUP_SUCCESS","SIGNUP_FAILED","getCities","cities","GET_CITIES_REQUEST","GET_CITIES_SUCCESS","GET_CITIES_FAILED"],"mappings":"AAAA,OAAO,KAAKA,WAAZ,MAA6B,eAA7B;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,OAAT,QAAwB,YAAxB;AACA,SAASC,MAAT,QAAuB,oBAAvB;AAEA,OAAO,MAAMC,WAAW,GAAG;AAC1BC,EAAAA,KAD0B;AAE1BC,EAAAA,MAF0B;AAG1BC,EAAAA;AAH0B,CAApB;;AAMP,SAASF,KAAT,CAAeG,KAAf,EAAsBC,QAAtB,EAAgC;AAC/B,SAAOC,QAAQ,IAAI;AAClBA,IAAAA,QAAQ,CAACC,OAAO,EAAR,CAAR;AACAV,IAAAA,WAAW,CAACI,KAAZ,CAAkBG,KAAlB,EAAyBC,QAAzB,EACEG,IADF,CAEEC,IAAI,IAAI;AACPV,MAAAA,MAAM,CAACW,OAAP,CAAe,SAAf,EAA0B,wBAA1B;AACAJ,MAAAA,QAAQ,CAACI,OAAO,CAACD,IAAD,CAAR,CAAR;AACAE,MAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACA,KANH,EAOEC,KAAK,IAAI;AACRf,MAAAA,MAAM,CAACe,KAAP,CAAa,OAAb,EAAsBA,KAAK,CAACC,aAAN,IAAuB,8BAA7C;AACAT,MAAAA,QAAQ,CAACU,OAAO,CAACF,KAAK,CAACG,QAAN,EAAD,CAAR,CAAR;AACA,KAVH;AAYA,GAdD;;AAgBA,WAASV,OAAT,GAAmB;AAAE,WAAO;AAAEW,MAAAA,IAAI,EAAEtB,WAAW,CAACuB;AAApB,KAAP;AAA4C;;AACjE,WAAST,OAAT,CAAiBD,IAAjB,EAAuB;AAAE,WAAO;AAAES,MAAAA,IAAI,EAAEtB,WAAW,CAACwB,aAApB;AAAmCC,MAAAA,OAAO,EAAE;AAAEZ,QAAAA;AAAF;AAA5C,KAAP;AAA+D;;AACxF,WAASO,OAAT,CAAiBF,KAAjB,EAAwB;AAAE,WAAO;AAAEI,MAAAA,IAAI,EAAEtB,WAAW,CAAC0B;AAApB,KAAP;AAA2C;AACrE;;AAED,SAASpB,MAAT,CAAgBqB,IAAhB,EAAsBnB,KAAtB,EAA6BC,QAA7B,EAAuC;AACtC,SAAOC,QAAQ,IAAI;AAClBA,IAAAA,QAAQ,CAACC,OAAO,EAAR,CAAR;AACAV,IAAAA,WAAW,CAACK,MAAZ,CAAmBqB,IAAnB,EAAyBnB,KAAzB,EAAgCC,QAAhC,EACEG,IADF,CAEEC,IAAI,IAAI;AACPV,MAAAA,MAAM,CAACW,OAAP,CAAe,SAAf,EAA0B,yBAA1B;AACAJ,MAAAA,QAAQ,CAACI,OAAO,CAACD,IAAD,CAAR,CAAR;AAEAX,MAAAA,OAAO,CAAC0B,IAAR,CAAc,QAAd;AACA,KAPH,EAQEV,KAAK,IAAI;AACRf,MAAAA,MAAM,CAACe,KAAP,CAAa,OAAb,EAAsBA,KAAK,CAACC,aAAN,IAAuB,6BAA7C;AACAT,MAAAA,QAAQ,CAACU,OAAO,CAACF,KAAK,CAACG,QAAN,EAAD,CAAR,CAAR;AACA,KAXH;AAaA,GAfD;;AAiBA,WAASV,OAAT,GAAmB;AAAE,WAAO;AAAEW,MAAAA,IAAI,EAAEtB,WAAW,CAAC6B;AAApB,KAAP;AAA6C;;AAClE,WAASf,OAAT,CAAiBD,IAAjB,EAAuB;AAAE,WAAO;AAAES,MAAAA,IAAI,EAAEtB,WAAW,CAAC8B,cAApB;AAAoCL,MAAAA,OAAO,EAAE;AAAEZ,QAAAA;AAAF;AAA7C,KAAP;AAAgE;;AACzF,WAASO,OAAT,CAAiBF,KAAjB,EAAwB;AAAE,WAAO;AAAEI,MAAAA,IAAI,EAAEtB,WAAW,CAAC+B;AAApB,KAAP;AAA4C;AACtE;;AAGD,SAASxB,YAAT,GAAwB;AACvB,SAAOG,QAAQ,IAAI;AAClBA,IAAAA,QAAQ,CAACC,OAAO,EAAR,CAAR;AACAV,IAAAA,WAAW,CAAC+B,SAAZ,GACEpB,IADF,CAEEqB,MAAM,IAAI;AACTvB,MAAAA,QAAQ,CAACI,OAAO,CAACmB,MAAD,CAAR,CAAR;AACA,KAJH,EAKEf,KAAK,IAAI;AACRf,MAAAA,MAAM,CAACe,KAAP,CAAa,OAAb,EAAsBA,KAAK,CAACC,aAAN,IAAuB,+BAA7C;AACAT,MAAAA,QAAQ,CAACU,OAAO,CAACF,KAAK,CAACG,QAAN,EAAD,CAAR,CAAR;AACA,KARH;AAUA,GAZD;;AAcA,WAASV,OAAT,GAAmB;AAAE,WAAO;AAAEW,MAAAA,IAAI,EAAEtB,WAAW,CAACkC;AAApB,KAAP;AAAiD;;AACtE,WAASpB,OAAT,CAAiBmB,MAAjB,EAAyB;AAAE,WAAO;AAAEX,MAAAA,IAAI,EAAEtB,WAAW,CAACmC,kBAApB;AAAwCV,MAAAA,OAAO,EAAE;AAAEQ,QAAAA;AAAF;AAAjD,KAAP;AAAsE;;AACjG,WAASb,OAAT,CAAiBF,KAAjB,EAAwB;AAAE,WAAO;AAAEI,MAAAA,IAAI,EAAEtB,WAAW,CAACoC;AAApB,KAAP;AAAgD;AAC1E","sourcesContent":["import * as actionTypes from './actionTypes';\nimport { userService } from '../services';\nimport { history } from '../helpers';\nimport { toastr } from 'react-redux-toastr'\n\nexport const userActions = {\n\tlogin,\n\tsignup,\n\tgetAllCities\n};\n\nfunction login(email, password) {\n\treturn dispatch => {\n\t\tdispatch(request());\n\t\tuserService.login(email, password)\n\t\t\t.then(\n\t\t\t\tuser => {\n\t\t\t\t\ttoastr.success('Success', \"Successfully logged in\")\n\t\t\t\t\tdispatch(success(user));\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t},\n\t\t\t\terror => {\n\t\t\t\t\ttoastr.error('Error', error.error_message || \"Email and password not valid\")\n\t\t\t\t\tdispatch(failure(error.toString()));\n\t\t\t\t}\n\t\t\t);\n\t};\n\n\tfunction request() { return { type: actionTypes.LOGIN_REQUEST } }\n\tfunction success(user) { return { type: actionTypes.LOGIN_SUCCESS, payload: { user } } }\n\tfunction failure(error) { return { type: actionTypes.LOGIN_FAILED } }\n}\n\nfunction signup(name, email, password) {\n\treturn dispatch => {\n\t\tdispatch(request());\n\t\tuserService.signup(name, email, password)\n\t\t\t.then(\n\t\t\t\tuser => {\n\t\t\t\t\ttoastr.success('Success', \"Registration Successful\")\n\t\t\t\t\tdispatch(success(user));\n\n\t\t\t\t\thistory.push(`/login`);\n\t\t\t\t},\n\t\t\t\terror => {\n\t\t\t\t\ttoastr.error('Error', error.error_message || \"Oops Something Went Wrong !\")\n\t\t\t\t\tdispatch(failure(error.toString()));\n\t\t\t\t}\n\t\t\t);\n\t};\n\n\tfunction request() { return { type: actionTypes.SIGNUP_REQUEST } }\n\tfunction success(user) { return { type: actionTypes.SIGNUP_SUCCESS, payload: { user } } }\n\tfunction failure(error) { return { type: actionTypes.SIGNUP_FAILED } }\n}\n\n\nfunction getAllCities() {\n\treturn dispatch => {\n\t\tdispatch(request());\n\t\tuserService.getCities()\n\t\t\t.then(\n\t\t\t\tcities => {\n\t\t\t\t\tdispatch(success(cities));\n\t\t\t\t},\n\t\t\t\terror => {\n\t\t\t\t\ttoastr.error('Error', error.error_message || \"Please check your credentials\")\n\t\t\t\t\tdispatch(failure(error.toString()));\n\t\t\t\t}\n\t\t\t);\n\t};\n\n\tfunction request() { return { type: actionTypes.GET_CITIES_REQUEST } }\n\tfunction success(cities) { return { type: actionTypes.GET_CITIES_SUCCESS, payload: { cities } } }\n\tfunction failure(error) { return { type: actionTypes.GET_CITIES_FAILED } }\n}\n"]},"metadata":{},"sourceType":"module"}